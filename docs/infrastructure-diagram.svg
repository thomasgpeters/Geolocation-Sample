<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800" width="1200" height="800">
  <defs>
    <!-- Gradients -->
    <linearGradient id="headerGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#2c3e50;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1a252f;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="frontendGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#3498db;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2980b9;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="middlewareGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#27ae60;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1e8449;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="databaseGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#9b59b6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#7d3c98;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="cloudGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#ecf0f1;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#bdc3c7;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="containerGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#0db7ed;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#0a8cb5;stop-opacity:1" />
    </linearGradient>

    <!-- Drop shadow filter -->
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="3" stdDeviation="3" flood-opacity="0.3"/>
    </filter>

    <!-- Server icon -->
    <symbol id="serverIcon" viewBox="0 0 40 50">
      <rect x="2" y="2" width="36" height="46" rx="3" fill="#555" stroke="#333" stroke-width="1"/>
      <rect x="6" y="6" width="28" height="8" rx="1" fill="#2ecc71"/>
      <rect x="6" y="18" width="28" height="8" rx="1" fill="#3498db"/>
      <rect x="6" y="30" width="28" height="8" rx="1" fill="#e74c3c"/>
      <circle cx="30" cy="10" r="2" fill="#fff"/>
      <circle cx="30" cy="22" r="2" fill="#fff"/>
      <circle cx="30" cy="34" r="2" fill="#fff"/>
    </symbol>

    <!-- Database icon -->
    <symbol id="dbIcon" viewBox="0 0 40 50">
      <ellipse cx="20" cy="10" rx="16" ry="6" fill="#9b59b6" stroke="#7d3c98" stroke-width="1"/>
      <path d="M4 10 v30 a16 6 0 0 0 32 0 v-30" fill="#9b59b6" stroke="#7d3c98" stroke-width="1"/>
      <ellipse cx="20" cy="40" rx="16" ry="6" fill="#8e44ad"/>
      <ellipse cx="20" cy="25" rx="16" ry="6" fill="none" stroke="#7d3c98" stroke-width="0.5" opacity="0.5"/>
    </symbol>

    <!-- Container icon -->
    <symbol id="containerIcon" viewBox="0 0 50 40">
      <rect x="2" y="8" width="46" height="30" rx="2" fill="#0db7ed" stroke="#0a8cb5" stroke-width="1"/>
      <rect x="6" y="12" width="10" height="8" fill="#fff" opacity="0.3"/>
      <rect x="20" y="12" width="10" height="8" fill="#fff" opacity="0.3"/>
      <rect x="34" y="12" width="10" height="8" fill="#fff" opacity="0.3"/>
      <rect x="6" y="24" width="10" height="8" fill="#fff" opacity="0.3"/>
      <rect x="20" y="24" width="10" height="8" fill="#fff" opacity="0.3"/>
      <rect x="34" y="24" width="10" height="8" fill="#fff" opacity="0.3"/>
    </symbol>

    <!-- Cloud shape -->
    <symbol id="cloudShape" viewBox="0 0 100 60">
      <path d="M25 50 a20 20 0 0 1 0-35 a25 25 0 0 1 45-5 a20 20 0 0 1 20 35 z"
            fill="url(#cloudGrad)" stroke="#95a5a6" stroke-width="1"/>
    </symbol>
  </defs>

  <!-- Background -->
  <rect width="1200" height="800" fill="#f8f9fa"/>

  <!-- Title -->
  <rect x="0" y="0" width="1200" height="60" fill="url(#headerGrad)"/>
  <text x="600" y="40" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#fff">
    Three-Tier Architecture: Native vs. Container Deployment
  </text>

  <!-- Divider line -->
  <line x1="600" y1="80" x2="600" y2="780" stroke="#bdc3c7" stroke-width="2" stroke-dasharray="10,5"/>

  <!-- Left side: Native Deployment -->
  <text x="300" y="100" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#2c3e50">
    Native Deployment (Host Machines)
  </text>

  <!-- Native - Presentation Tier -->
  <g filter="url(#shadow)">
    <rect x="100" y="140" width="400" height="120" rx="10" fill="url(#frontendGrad)"/>
    <text x="300" y="170" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#fff">
      PRESENTATION TIER
    </text>
    <text x="300" y="195" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#fff">
      C++ ERB Frontend Application
    </text>
    <use href="#serverIcon" x="150" y="200" width="30" height="40"/>
    <use href="#serverIcon" x="285" y="200" width="30" height="40"/>
    <use href="#serverIcon" x="420" y="200" width="30" height="40"/>
    <text x="165" y="250" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#fff">Host 1</text>
    <text x="300" y="250" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#fff">Host 2</text>
    <text x="435" y="250" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#fff">Host 3</text>
  </g>

  <!-- Arrow down -->
  <path d="M300 265 L300 290 L290 280 M300 290 L310 280" stroke="#7f8c8d" stroke-width="3" fill="none"/>
  <text x="340" y="280" font-family="Arial, sans-serif" font-size="11" fill="#7f8c8d">REST/HTTP</text>

  <!-- Native - Application Tier -->
  <g filter="url(#shadow)">
    <rect x="100" y="300" width="400" height="120" rx="10" fill="url(#middlewareGrad)"/>
    <text x="300" y="330" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#fff">
      APPLICATION TIER
    </text>
    <text x="300" y="355" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#fff">
      ApiLogicServer (Python)
    </text>
    <use href="#serverIcon" x="150" y="360" width="30" height="40"/>
    <use href="#serverIcon" x="285" y="360" width="30" height="40"/>
    <use href="#serverIcon" x="420" y="360" width="30" height="40"/>
    <text x="165" y="410" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#fff">Host 4</text>
    <text x="300" y="410" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#fff">Host 5</text>
    <text x="435" y="410" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#fff">Host 6</text>
  </g>

  <!-- Arrow down -->
  <path d="M300 425 L300 450 L290 440 M300 450 L310 440" stroke="#7f8c8d" stroke-width="3" fill="none"/>
  <text x="340" y="440" font-family="Arial, sans-serif" font-size="11" fill="#7f8c8d">SQL/TCP</text>

  <!-- Native - Data Tier -->
  <g filter="url(#shadow)">
    <rect x="100" y="460" width="400" height="130" rx="10" fill="url(#databaseGrad)"/>
    <text x="300" y="490" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#fff">
      DATA TIER
    </text>
    <text x="300" y="515" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#fff">
      PostgreSQL Database
    </text>
    <use href="#dbIcon" x="200" y="520" width="35" height="50"/>
    <use href="#dbIcon" x="365" y="520" width="35" height="50"/>
    <text x="217" y="578" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#fff">Primary</text>
    <text x="382" y="578" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#fff">Replica</text>
    <!-- Replication arrow -->
    <path d="M255 545 L345 545" stroke="#fff" stroke-width="2" stroke-dasharray="5,3"/>
    <text x="300" y="540" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#fff">Replication</text>
  </g>

  <!-- Native deployment details -->
  <g>
    <rect x="100" y="610" width="400" height="100" rx="5" fill="#fff" stroke="#bdc3c7" stroke-width="1"/>
    <text x="120" y="635" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#2c3e50">Native Deployment Characteristics:</text>
    <text x="120" y="655" font-family="Arial, sans-serif" font-size="11" fill="#555">- Direct hardware access, optimal performance</text>
    <text x="120" y="672" font-family="Arial, sans-serif" font-size="11" fill="#555">- Manual scaling and configuration</text>
    <text x="120" y="689" font-family="Arial, sans-serif" font-size="11" fill="#555">- OS-level dependencies managed separately</text>
    <text x="120" y="706" font-family="Arial, sans-serif" font-size="11" fill="#555">- Ideal for: High-performance, low-latency needs</text>
  </g>

  <!-- Right side: Container Deployment -->
  <text x="900" y="100" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#2c3e50">
    Container Deployment (Cloud)
  </text>

  <!-- Cloud background -->
  <g filter="url(#shadow)">
    <rect x="630" y="130" width="540" height="480" rx="15" fill="#e8f4fc" stroke="#3498db" stroke-width="2"/>
    <text x="900" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#2980b9">
      Cloud Infrastructure (AWS / Azure / GCP)
    </text>
  </g>

  <!-- Kubernetes cluster outline -->
  <rect x="650" y="170" width="500" height="420" rx="10" fill="none" stroke="#326ce5" stroke-width="2" stroke-dasharray="8,4"/>
  <text x="900" y="190" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#326ce5">Kubernetes Cluster</text>

  <!-- Container - Presentation Tier -->
  <g filter="url(#shadow)">
    <rect x="670" y="200" width="460" height="90" rx="8" fill="url(#frontendGrad)"/>
    <text x="900" y="225" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#fff">
      PRESENTATION TIER - C++ ERB Frontend
    </text>
    <use href="#containerIcon" x="710" y="235" width="40" height="35"/>
    <use href="#containerIcon" x="830" y="235" width="40" height="35"/>
    <use href="#containerIcon" x="950" y="235" width="40" height="35"/>
    <use href="#containerIcon" x="1070" y="235" width="40" height="35"/>
    <text x="730" y="280" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#fff">Pod 1</text>
    <text x="850" y="280" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#fff">Pod 2</text>
    <text x="970" y="280" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#fff">Pod 3</text>
    <text x="1090" y="280" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#fff">Pod N</text>
  </g>

  <!-- Arrow down -->
  <path d="M900 295 L900 320 L890 310 M900 320 L910 310" stroke="#7f8c8d" stroke-width="3" fill="none"/>
  <text x="940" y="312" font-family="Arial, sans-serif" font-size="11" fill="#7f8c8d">Service Mesh</text>

  <!-- Container - Application Tier -->
  <g filter="url(#shadow)">
    <rect x="670" y="330" width="460" height="90" rx="8" fill="url(#middlewareGrad)"/>
    <text x="900" y="355" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#fff">
      APPLICATION TIER - ApiLogicServer
    </text>
    <use href="#containerIcon" x="710" y="365" width="40" height="35"/>
    <use href="#containerIcon" x="830" y="365" width="40" height="35"/>
    <use href="#containerIcon" x="950" y="365" width="40" height="35"/>
    <use href="#containerIcon" x="1070" y="365" width="40" height="35"/>
    <text x="730" y="410" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#fff">Pod 1</text>
    <text x="850" y="410" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#fff">Pod 2</text>
    <text x="970" y="410" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#fff">Pod 3</text>
    <text x="1090" y="410" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#fff">Pod N</text>
  </g>

  <!-- Arrow down -->
  <path d="M900 425 L900 450 L890 440 M900 450 L910 440" stroke="#7f8c8d" stroke-width="3" fill="none"/>
  <text x="940" y="442" font-family="Arial, sans-serif" font-size="11" fill="#7f8c8d">PgBouncer</text>

  <!-- Container - Data Tier -->
  <g filter="url(#shadow)">
    <rect x="670" y="460" width="460" height="110" rx="8" fill="url(#databaseGrad)"/>
    <text x="900" y="485" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#fff">
      DATA TIER - PostgreSQL (StatefulSet)
    </text>
    <use href="#containerIcon" x="730" y="495" width="40" height="35"/>
    <use href="#dbIcon" x="780" y="495" width="30" height="40"/>
    <text x="770" y="550" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#fff">Primary + PV</text>

    <use href="#containerIcon" x="930" y="495" width="40" height="35"/>
    <use href="#dbIcon" x="980" y="495" width="30" height="40"/>
    <text x="970" y="550" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#fff">Replica + PV</text>

    <!-- Replication arrow -->
    <path d="M830 515 L910 515" stroke="#fff" stroke-width="2" stroke-dasharray="5,3"/>
    <text x="870" y="510" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#fff">Sync</text>

    <!-- Persistent storage indicator -->
    <rect x="1050" y="495" width="60" height="50" rx="3" fill="#f39c12" stroke="#d68910" stroke-width="1"/>
    <text x="1080" y="515" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#fff">Cloud</text>
    <text x="1080" y="528" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#fff">Storage</text>
    <text x="1080" y="541" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#fff">(EBS/PD)</text>
  </g>

  <!-- Container deployment details -->
  <g>
    <rect x="700" y="610" width="400" height="100" rx="5" fill="#fff" stroke="#bdc3c7" stroke-width="1"/>
    <text x="720" y="635" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#2c3e50">Container Deployment Characteristics:</text>
    <text x="720" y="655" font-family="Arial, sans-serif" font-size="11" fill="#555">- Auto-scaling based on demand (HPA)</text>
    <text x="720" y="672" font-family="Arial, sans-serif" font-size="11" fill="#555">- Infrastructure as Code, GitOps deployment</text>
    <text x="720" y="689" font-family="Arial, sans-serif" font-size="11" fill="#555">- Self-healing, rolling updates, zero downtime</text>
    <text x="720" y="706" font-family="Arial, sans-serif" font-size="11" fill="#555">- Ideal for: Scalability, multi-region, CI/CD</text>
  </g>

  <!-- Legend -->
  <g>
    <rect x="50" y="740" width="1100" height="50" rx="5" fill="#fff" stroke="#bdc3c7" stroke-width="1"/>
    <text x="80" y="770" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#2c3e50">Legend:</text>

    <rect x="150" y="755" width="20" height="20" fill="url(#frontendGrad)" rx="3"/>
    <text x="180" y="770" font-family="Arial, sans-serif" font-size="11" fill="#555">Presentation (C++ ERB)</text>

    <rect x="350" y="755" width="20" height="20" fill="url(#middlewareGrad)" rx="3"/>
    <text x="380" y="770" font-family="Arial, sans-serif" font-size="11" fill="#555">Application (ApiLogicServer)</text>

    <rect x="580" y="755" width="20" height="20" fill="url(#databaseGrad)" rx="3"/>
    <text x="610" y="770" font-family="Arial, sans-serif" font-size="11" fill="#555">Data (PostgreSQL)</text>

    <use href="#serverIcon" x="770" y="752" width="20" height="25"/>
    <text x="800" y="770" font-family="Arial, sans-serif" font-size="11" fill="#555">Physical Host</text>

    <use href="#containerIcon" x="920" y="755" width="25" height="20"/>
    <text x="955" y="770" font-family="Arial, sans-serif" font-size="11" fill="#555">Container/Pod</text>

    <use href="#dbIcon" x="1060" y="750" width="20" height="28"/>
    <text x="1090" y="770" font-family="Arial, sans-serif" font-size="11" fill="#555">Database</text>
  </g>

</svg>
